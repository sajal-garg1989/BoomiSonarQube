<?xml version='1.0' encoding='utf-8'?>
<Component xmlns:ns2="http://www.boomi.com/connector/annotation"
xmlns:ns3="http://exacttarget.com/wsdl/partnerAPI"
xmlns:ns4="urn:fault.partner.exacttarget.com"
xmlns:ns5="http://schemas.boomi.com/sap/edi_dc40"
xmlns:ns6="http://schemas.microsoft.com/2003/10/Serialization/"
deleted="false">
  <Id>ac7a932a-695f-42fb-badd-4cd0d8f58e0e</Id>
  <Type>process</Type>
  <Name>_UserDefinedDelimiter</Name>
  <Version>1</Version>
  <FolderId name="ClientName8428/Process Library/jainendra-sandbox/People_Import">
  3962285</FolderId>
  <AccountId>clientname8428-NPZ917</AccountId>
  <Properties>
    <Property>
      <Name>overrides-enabled</Name>
      <Value>false</Value>
    </Property>
    <Property>
      <Name>startshape-type</Name>
      <Value>PASSTHROUGH</Value>
    </Property>
  </Properties>
  <References>
    <Ref compId="8b527dcd-0969-4f2b-b3a1-4417c3710170"
    refId="shape7-parameter-1-processproperty"
    name="UserDefinedDelimiter" />
    <Ref compId="8b527dcd-0969-4f2b-b3a1-4417c3710170"
    refId="shape7-parameter-2-processproperty"
    name="UserDefinedDelimiter" />
  </References>
  <Description />
  <Object>
    <process allowSimultaneous="false" enableUserLog="false"
    processLogOnErrorOnly="false" purgeDataImmediately="false"
    updateRunDates="false" workload="general">
      <shapes>
        <shape image="start" name="shape1" shapetype="start"
        userlabel="DataProcess" x="32.0" y="96.0">
          <configuration>
            <passthroughaction />
          </configuration>
          <dragpoints>
            <dragpoint name="shape1.dragpoint1" toShape="shape4"
            x="112.0" y="105.0">
              <linesegment length="0"
              name="shape1.dragpoint1.lineseg1" orient="horizontal"
              x="66.0" y="111.0" />
              <linesegment length="0"
              name="shape1.dragpoint1.lineseg2" orient="vertical"
              x="66.0" y="111.0" />
              <linesegment length="31"
              name="shape1.dragpoint1.lineseg3" orient="horizontal"
              x="66.0" y="111.0" />
              <linesegment length="0"
              name="shape1.dragpoint1.lineseg4" orient="vertical"
              x="97.0" y="111.0" />
              <linesegment length="15"
              name="shape1.dragpoint1.lineseg5" orient="horizontal"
              x="97.0" y="111.0" />
            </dragpoint>
          </dragpoints>
        </shape>
        <shape image="dataprocess_icon" name="shape2"
        shapetype="dataprocess"
        userlabel="UserDefinedDelimiterProcessor" x="528.0"
        y="96.0">
          <configuration>
            <dataprocess>
              <step index="1" key="1" name="Custom Scripting"
              processtype="12">
                <dataprocessscript language="groovy">
                  <script>import java.util.Properties; import
                  java.io.InputStream; import
                  java.io.InputStreamReader; import
                  java.io.StringWriter; import java.io.Writer;
                  import java.io.ByteArrayInputStream; import
                  java.util.List; import com.opencsv.CSVReader;
                  import com.opencsv.CSVWriter; import
                  com.boomi.execution.ExecutionUtil; for( int i =
                  0; i &lt; dataContext.getDataCount(); i++ ) {
                  String userDefinedDelimiter=
                  ExecutionUtil.getDynamicProcessProperty('Delimiter');
                  String integrationType =
                  ExecutionUtil.getDynamicProcessProperty('IntegrationType');
                  String fromDelimiter = ","; String toDelimiter =
                  ","; if("Import".equalsIgnoreCase(integrationType
                  )){ fromDelimiter = userDefinedDelimiter;
                  toDelimiter =","; } else
                  if("Export".equalsIgnoreCase(integrationType )){
                  fromDelimiter = ","; toDelimiter =
                  userDefinedDelimiter; } else{ throw new
                  Exception('Error:Integration Type must be
                  provided in user defined delimiter sub-process');
                  } InputStream is = dataContext.getStream(i);
                  Properties props = dataContext.getProperties(i);
                  CSVReader csvReader = new CSVReader(new
                  InputStreamReader(is),fromDelimiter.charAt(0));
                  List&lt;String[]&gt; allData =
                  csvReader.readAll(); Writer stringWriter = new
                  StringWriter(); CSVWriter writer = new
                  CSVWriter(stringWriter,toDelimiter.charAt(0),
                  CSVWriter.DEFAULT_QUOTE_CHARACTER);
                  writer.writeAll(allData); byte[] barray =
                  stringWriter.toString().getBytes(); is = new
                  ByteArrayInputStream(barray);
                  dataContext.storeStream(is, props); }</script>
                </dataprocessscript>
              </step>
            </dataprocess>
          </configuration>
          <dragpoints>
            <dragpoint name="shape2.dragpoint1" toShape="shape3"
            x="768.0" y="105.0">
              <linesegment length="0"
              name="shape2.dragpoint1.lineseg1" orient="horizontal"
              x="562.0" y="111.0" />
              <linesegment length="0"
              name="shape2.dragpoint1.lineseg2" orient="vertical"
              x="562.0" y="111.0" />
              <linesegment length="111"
              name="shape2.dragpoint1.lineseg3" orient="horizontal"
              x="562.0" y="111.0" />
              <linesegment length="0"
              name="shape2.dragpoint1.lineseg4" orient="vertical"
              x="673.0" y="111.0" />
              <linesegment length="95"
              name="shape2.dragpoint1.lineseg5" orient="horizontal"
              x="673.0" y="111.0" />
            </dragpoint>
          </dragpoints>
        </shape>
        <shape image="returndocuments_icon" name="shape3"
        shapetype="returndocuments" userlabel="ConvertedFile"
        x="784.0" y="96.0">
          <configuration>
            <returndocuments label="ConvertedFile" />
          </configuration>
          <dragpoints />
        </shape>
        <shape image="catcherrors_icon" name="shape4"
        shapetype="catcherrors" userlabel="Try/Catch" x="128.0"
        y="96.0">
          <configuration>
            <catcherrors catchAll="false" retryCount="0" />
          </configuration>
          <dragpoints>
            <dragpoint identifier="default"
            name="shape4.dragpoint1" text="Try" toShape="shape7"
            x="320.0" y="105.0">
              <linesegment length="0"
              name="shape4.dragpoint1.lineseg1" orient="horizontal"
              x="162.0" y="111.0" />
              <linesegment length="0"
              name="shape4.dragpoint1.lineseg2" orient="vertical"
              x="162.0" y="111.0" />
              <linesegment length="87"
              name="shape4.dragpoint1.lineseg3" orient="horizontal"
              x="162.0" y="111.0" />
              <linesegment length="0"
              name="shape4.dragpoint1.lineseg4" orient="vertical"
              x="249.0" y="111.0" />
              <linesegment label="Try" length="71"
              name="shape4.dragpoint1.lineseg5" orient="horizontal"
              x="249.0" y="111.0" />
            </dragpoint>
            <dragpoint identifier="error" name="shape4.dragpoint2"
            text="Catch" toShape="shape5" x="352.0" y="233.0">
              <linesegment length="0"
              name="shape4.dragpoint2.lineseg1" orient="horizontal"
              x="162.0" y="111.0" />
              <linesegment length="0"
              name="shape4.dragpoint2.lineseg2" orient="vertical"
              x="162.0" y="111.0" />
              <linesegment length="103"
              name="shape4.dragpoint2.lineseg3" orient="horizontal"
              x="162.0" y="111.0" />
              <linesegment length="128"
              name="shape4.dragpoint2.lineseg4" orient="vertical"
              x="265.0" y="111.0" />
              <linesegment label="Catch" length="87"
              name="shape4.dragpoint2.lineseg5" orient="horizontal"
              x="265.0" y="239.0" />
            </dragpoint>
          </dragpoints>
        </shape>
        <shape image="exception_icon" name="shape5"
        shapetype="exception"
        userlabel="UserDefinedDelimiterException" x="368.0"
        y="224.0">
          <configuration>
            <exception stopProcessReturnSingleDoc="false"
            stopsingledoc="false" title="">
              <exMessage>Error occurred while executing user
              defined delimiter file conversion in integration
              process.</exMessage>
              <exParameters>
                <parametervalue key="0" valueType="track">
                  <trackparameter defaultValue=""
                  propertyId="meta.base.catcherrorsmessage"
                  propertyName="Base - Try/Catch Message" />
                </parametervalue>
              </exParameters>
            </exception>
          </configuration>
          <dragpoints />
        </shape>
        <shape image="documentproperties_icon" name="shape7"
        shapetype="documentproperties"
        userlabel="Set User Delimiter Properties" x="336.0"
        y="96.0">
          <configuration>
            <documentproperties>
              <documentproperty defaultValue=""
              isTradingPartner="false"
              name="Dynamic Process Property - Delimiter"
              persist="false" propertyId="process.Delimiter">
                <sourcevalues>
                  <parametervalue key="1"
                  valueType="definedparameter">
                    <definedprocessparameter componentId="8b527dcd-0969-4f2b-b3a1-4417c3710170"
                    componentName="UserDefinedDelimiter"
                    propertyKey="6ca250b9-9c38-464d-ac33-7ae048df2ebc"
                    propertyLabel="Delimiter" />
                  </parametervalue>
                </sourcevalues>
              </documentproperty>
              <documentproperty defaultValue=""
              isTradingPartner="false"
              name="Dynamic Process Property - IntegrationType"
              persist="false" propertyId="process.IntegrationType">
                <sourcevalues>
                  <parametervalue key="2"
                  valueType="definedparameter">
                    <definedprocessparameter componentId="8b527dcd-0969-4f2b-b3a1-4417c3710170"
                    componentName="UserDefinedDelimiter"
                    propertyKey="8e1a23a3-90e8-4cd3-aa11-479ad7742d5e"
                    propertyLabel="IntegrationType" />
                  </parametervalue>
                </sourcevalues>
              </documentproperty>
            </documentproperties>
          </configuration>
          <dragpoints>
            <dragpoint name="shape7.dragpoint1" toShape="shape2"
            x="512.0" y="105.0">
              <linesegment length="0"
              name="shape7.dragpoint1.lineseg1" orient="horizontal"
              x="370.0" y="111.0" />
              <linesegment length="0"
              name="shape7.dragpoint1.lineseg2" orient="vertical"
              x="370.0" y="111.0" />
              <linesegment length="79"
              name="shape7.dragpoint1.lineseg3" orient="horizontal"
              x="370.0" y="111.0" />
              <linesegment length="0"
              name="shape7.dragpoint1.lineseg4" orient="vertical"
              x="449.0" y="111.0" />
              <linesegment length="63"
              name="shape7.dragpoint1.lineseg5" orient="horizontal"
              x="449.0" y="111.0" />
            </dragpoint>
          </dragpoints>
        </shape>
      </shapes>
    </process>
  </Object>
</Component>
